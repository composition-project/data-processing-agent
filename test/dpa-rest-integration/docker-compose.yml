version: '2'
services:
  mqtt-broker:
    image: eclipse-mosquitto
  dpa:
    build:
      context: ../../gpl-artifacts/
      dockerfile: Dockerfile
    volumes:
      - ./dpa-config:/config:ro
    depends_on:
      - mqtt-broker
    links:
      - mqtt-broker
    environment:
      - connection_broker_mqtt_hostname=mqtt-broker
  dpa-tester:
    build:
      context: .
      dockerfile: Dockerfile
    depends_on:
      - mqtt-broker
    links:
      - mqtt-broker
    environment:
      - DPA_ROOT_URL=http://dpa:8319
      - MQTT_HOST=mqtt-broker
      - MQTT_PORT=1883
