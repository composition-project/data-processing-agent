version: '2'
services:
  mqtt-broker:
    image: eclipse-mosquitto
    ports:
      - "1884:1883"
  dpa:
    image: docker.linksmart.eu/la/agent:dpa-snapshot
    ports:
      - "8319:8319"
    depends_on:
      - mqtt-broker
    links:
      - mqtt-broker
    environment:
      - connection_broker_mqtt_hostname=mqtt-broker
      - api_events_mqtt_topic_incoming_SenML=/testing/#
  dpa-tester:
    image: docker.linksmart.eu/la/dpa-simple-tester:latest
    depends_on:
      - mqtt-broker
    links:
      - mqtt-broker
    environment:
      - DPA_ROOT_URL=http://dpa:8319
      - MQTT_HOST=mqtt-broker
      - MQTT_PORT=1883
